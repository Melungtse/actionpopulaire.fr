{% extends "front/layout.html" %}
{% load crispy_forms_tags %}

{% block title %}S'inscrire pour «&nbsp;{{ event.name }}&nbsp;»{% endblock %}

{% block additional_headers %}
    <style>
        fieldset legend {
            font-family: Montserrat, sans-serif;
            font-weight: 500;
            line-height: 1.1;
            color: #0098b6;
            font-size: 28px;
        }

        fieldset {
            margin-top: 2em;
        }
    </style>
{% endblock %}

{% block main %}
    <div class="row"><div class="col-responsive">
        <h2 class="headline">{{ event.subscription_form.title }}</h2>
        {% if rsvp %}
            <h3>Vous êtes bien inscrit⋅e à cet événement</h3>
            <p>
                Voici les informations que vous avez donné :
            </p>
            <ul>
                {% for label, value in submission_data.items %}
                    {% if value %}
                        <li><b>{{ label }}&nbsp;: {{ value }}</b></li>
                    {% endif %}
                {% endfor %}
            </ul>
            {% if guests_submission_data %}
                <p>Vous avez inscrit d'autre personnes :</p>
                {% for submission_data in guests_submission_data %}
                    <ul>
                    {% for label, value in submission_data.items %}
                        {% if value %}
                            <li><b>{{ label }}&nbsp;: {{ value }}</b></li>
                        {% endif %}
                    {% endfor %}
                    </ul>
                {% endfor %}
            {% endif %}
            {% if event.allow_guests %}
                <h3>Inscrire un⋅e autre participant⋅e</h3>
                <div class="alert alert-info">
                <p>
                    Vous pouvez inscrire un⋅e participant⋅e supplémentaire avec votre compte. Cela est utile si cette
                    personne ne dispose pas d'adresse email ou de compte sur lafranceinsoumise.fr. Il sera de votre
                    responsabilité de transmettre les éventuelles informations ou billets d'entrée qui vous seront envoyés
                    avant l'événement.
                </p>
                <p>
                    Si la personne dispose d'une adresse email, préférez plutôt une inscription via son propre compte.
                    <a href="{% url 'oauth_disconnect' %}">Cliquez ici pour vous connecter avec un autre compte</a>.
                </p>
                </div>
            {% endif %}
        {% endif %}
        {% if not rsvp or event.allow_guests %}
            {% if event.subscription_form.is_open %}
                <div class="intro">
                    {{ event.subscription_form.html_description }}
                </div>
                {% crispy form %}
            {% else %}
                <div class="intro">
                    {{ event.subscription_form.html_closed_message }}
                </div>
            {% endif %}
        {% endif %}
    </div></div>
{% endblock %}
